version: v1.0
name: SampleTest
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu2004
blocks:
  - name: C1Automation Test
    task:
      prologue:
        commands:
          - sudo apt-get install -y sendmail
      jobs:
        - name: C1LoginTest
          commands:
            - cd testAutomation_v1.0
            - sem-version node 14.21.3
            - cache restore
            - npm install
            - cache store
            - npm run loginFeatureTest
            - |
              RESULT=$?
              if [ $RESULT -eq 0 ]; then
                STATUS="passed"
              else
                STATUS="failed"
              fi
              SEMAPHORE_RESULT_URL="https://{your_org_name}.semaphoreci.com/projects/$SEMAPHORE_PROJECT_ID/workflows/$SEMAPHORE_WORKFLOW_ID"
              echo "Subject: C1 Functional Test Result
              Build Status: $STATUS
              Project: $SEMAPHORE_PROJECT_NAME
              Branch: $SEMAPHORE_GIT_BRANCH
              Commit: $SEMAPHORE_GIT_SHA
              Semaphore Result: $SEMAPHORE_RESULT_URL" | sendmail vimal.mishra@comprotechnologies.com
